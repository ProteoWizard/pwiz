<html>
<body>
<h1>AI-Assisted IDE Setup for Skyline Developers</h1>

<p>These instructions help Skyline developers configure their Windows workstation so LLM-assisted IDEs (Cursor, VS Code + Copilot/Claude, etc.) can build, test, and inspect Skyline autonomously. Perform these steps <i>after</i> cloning <code>pwiz</code> and completing the <a href="wiki-page.view?name=HowToBuildSkylineTip">standard setup</a>.</p>

<h2>1. Install PowerShell 7 (UTF-8 Terminal Support)</h2>

<ol>
<li>Run:<br><code>winget install Microsoft.PowerShell</code></li>
<li>Restart Cursor / VS Code.</li>
<li>Open a terminal and confirm PowerShell 7.x:<br><code>$PSVersionTable.PSVersion</code></li>
</ol>

<h2>2. Configure Cursor / VS Code Terminal</h2>

<p>Edit <code>.vscode/settings.json</code> inside the pwiz workspace:</p>

<pre>{
  "terminal.integrated.defaultProfile.windows": "PowerShell",
  "terminal.integrated.env.windows": {
    "LANG": "en_US.UTF-8",
    "LC_ALL": "en_US.UTF-8"
  }
}</pre>

<p>This ensures all terminals use UTF-8 output with PowerShell 7.</p>

<h2>3. Install ReSharper Command-Line Tools</h2>

<p>Needed for the build/inspection scripts used by LLMs:</p>

<pre>dotnet tool install -g JetBrains.ReSharper.GlobalTools</pre>

<h2>4. Install GitHub CLI (gh)</h2>

<p>The GitHub CLI enables AI agents to review PRs, fetch issue details, and check CI status directly from the IDE terminal.</p>

<p><strong>Install:</strong></p>
<pre>winget install GitHub.cli --accept-source-agreements --accept-package-agreements</pre>

<p><strong>Authenticate:</strong> Open a <i>separate</i> PowerShell 7 window (outside VS Code/Cursor) and run:</p>
<pre>gh auth login</pre>

<p>Follow the interactive prompts:</p>
<ol>
<li>Select <strong>GitHub.com</strong> as the account</li>
<li>Select <strong>SSH</strong> as your preferred protocol for Git operations</li>
<li>Answer <strong>No</strong> to generating a new SSH key (you should already have SSH configured via Git/TortoiseGit)</li>
<li>Select <strong>Login with a web browser</strong></li>
<li>Copy the one-time code displayed, then press Enter to open the browser</li>
<li>In the browser, click <strong>Continue</strong> to sign in with your active GitHub account</li>
<li>Paste the one-time code (Ctrl+V) and click <strong>Continue</strong></li>
<li>Click <strong>Continue</strong> again if asked</li>
<li>Click <strong>Authorize github</strong></li>
<li>Complete your 2FA (authenticator app, security key, etc.)</li>
<li>Browser shows "Congratulations, you're all set!"</li>
</ol>

<p><strong>Verify:</strong></p>
<pre>gh auth status
gh pr view 3700   # Test with any open PR</pre>

<p><strong>Note:</strong> The <code>gh auth login</code> command requires an interactive terminal and will not work inside an AI agent's shell context.</p>

<h2>5. Verify Git Line Ending Settings</h2>

<p>Run once to ensure Windows-style line endings locally:</p>

<pre>git config --global core.autocrlf true</pre>

<h2>6. Recommended IDE Extensions</h2>

<ul>
<li>VS Code / Cursor: C# Dev Kit (or C# extension), PowerShell, Markdown support
<ul>
<li>For VS Code - Install Copilot and Copilot chat, and Claude Code.</li>
<li>Ctrl+Shift+V - To switch to preview viewer for a .md file.</li>
</ul>
</li>
<li>Browser: Markdown Viewer extension for reading <code>ai/</code> docs
<ul>
<li>Requires registry editing to associate .md files with Chrome in Windows 10.</li>
</ul>
</li>
<li>Optional: Beyond Compare / WinMerge for reviewing LLM diffs</li>
</ul>

<h2>7. Optional: Install dotCover Command Line Tools</h2>

<p>Needed for code coverage analysis (<code>Run-Tests.ps1 -Coverage</code>). This is optional but recommended for analyzing test coverage of new features.</p>

<p><strong>Installation options:</strong></p>

<ol>
<li><strong>Download from JetBrains</strong> (recommended):
<ul>
<li>Download: <a href="https://www.jetbrains.com/dotcover/download/">https://www.jetbrains.com/dotcover/download/</a></li>
<li>Extract the zip file to: <code>libraries\jetbrains.dotcover.commandlinetools\{version}\tools\</code></li>
<li>The <code>Run-Tests.ps1</code> script will automatically find it there</li>
</ul>
</li>
<li><strong>Install via .NET global tools</strong>:
<pre>dotnet tool install --global JetBrains.dotCover.CommandLineTools</pre>
Installs to: <code>%USERPROFILE%\.dotnet\tools\dotCover.exe</code>
</li>
</ol>

<p><strong>Note:</strong> dotCover 2025.3.0.2 has a known bug with JSON export. If JSON export fails, use version 2025.1.7 or earlier.</p>

<p>See <code>ai/docs/build-and-test-guide.md</code> for details on using code coverage.</p>

<h2>8. Validation Checklist</h2>

<p>From <code>pwiz_tools\Skyline</code> run:</p>

<pre>.\ai\Build-Skyline.ps1 -RunTests -QuickInspection
.\ai\Run-Tests.ps1 -TestName CodeInspection</pre>

<p>All commands should report <strong>[OK]</strong>. Resolve any <strong>[FAILED]</strong> messages before committing.</p>

<h2>9. Common Issues</h2>

<table border="1" cellpadding="5" cellspacing="0">
<tr><th>Symptom</th><th>Cause</th><th>Fix</th></tr>
<tr><td><code>gh</code> not found</td><td>GitHub CLI not installed</td><td><code>winget install GitHub.cli</code></td></tr>
<tr><td><code>gh auth login</code> hangs</td><td>Running inside agent terminal</td><td>Run in separate PowerShell 7 window</td></tr>
<tr><td><code>jb</code> not found</td><td>ReSharper CLI missing</td><td><code>dotnet tool install -g JetBrains.ReSharper.GlobalTools</code></td></tr>
<tr><td>CRLF/LF diffs everywhere</td><td><code>core.autocrlf</code> not set</td><td><code>git config --global core.autocrlf true</code></td></tr>
</table>

<h2>10. Full Details</h2>

<p>The repository now includes a complete reference in <code>ai/docs/developer-setup-guide.md</code>. Review that document for rationale, troubleshooting tips, and optional productivity tools.</p>

<p><i>Last updated:</i> 2025-12-05</p>
</body>
</html>